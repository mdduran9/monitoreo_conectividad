const express = require("express");
const cors = require("cors");
const ping = require("ping");
const path = require("path");

const app = express();
const port = 3000; // üëà Puerto donde correr√° el servidor

app.use(cors());

// Servir archivos est√°ticos (index.html, CSS, JS) desde la carpeta actual
app.use(express.static(path.join(__dirname)));

const tiendas = [
{ cod_siesa: "ANI", nombre: "CEDI ANTIOQUIA BODEGA CLIN 127", operador: "TIGO UNE", ip: "177.253.142.74" },
{ cod_siesa: "ANI", nombre: "CEDI ANTIOQUIA BODEGA CLIN 127", operador: "TIGO UNE", ip: "200.91.203.136" },
{ cod_siesa: "B01", nombre: "ANTONIA SANTOS", operador: "CLARO", ip: "190.85.32.13" },
{ cod_siesa: "B02", nombre: "BARRANCA PALMIRA", operador: "CLARO", ip: "181.57.239.85" },
{ cod_siesa: "B08", nombre: "FRANCISCO MUTUALIDAD", operador: "CLARO", ip: "190.145.129.145" },
{ cod_siesa: "B09", nombre: "DANGOND", operador: "CLARO", ip: "181.48.43.122" },
{ cod_siesa: "B11", nombre: "BARRANCA LOS PINOS", operador: "CLARO", ip: "190.85.192.97" },
{ cod_siesa: "B12", nombre: "CAMPO HERMOSO", operador: "CLARO", ip: "181.57.186.17" },
{ cod_siesa: "B14", nombre: "POMARROSO LA CUMBRE", operador: "CLARO", ip: "190.145.134.181" },
{ cod_siesa: "B16", nombre: "PORTAL DE PROVENZA", operador: "CLARO", ip: "190.85.74.94" },
{ cod_siesa: "B20", nombre: "PLAZA KENNEDY", operador: "CLARO", ip: "190.145.62.89" },
{ cod_siesa: "B24", nombre: "LA AURORA", operador: "CLARO", ip: "181.51.251.169" },
{ cod_siesa: "B25", nombre: "REAL DE MINAS", operador: "CLARO", ip: "190.144.46.113" },
{ cod_siesa: "B28", nombre: "CALLEJUELAS", operador: "CLARO", ip: "181.48.116.253" },
{ cod_siesa: "B29", nombre: "RESERVA CA√ëAVERAL", operador: "CLARO", ip: "190.144.125.53" },
{ cod_siesa: "B31", nombre: "MUTIS", operador: "CLARO", ip: "181.49.167.129" },
{ cod_siesa: "B32", nombre: "PERPETUO SOCORRO", operador: "CLARO", ip: "181.57.171.97" },
{ cod_siesa: "B33", nombre: "QUANTUM", operador: "CLARO", ip: "181.50.101.19" },
{ cod_siesa: "C04", nombre: "LA CABRERA", operador: "CLARO", ip: "181.48.114.229" },
{ cod_siesa: "C06", nombre: "PAMPLONA PLAZUELA", operador: "CLARO", ip: "181.48.114.121" },
{ cod_siesa: "C11", nombre: "LOS FAROLES", operador: "CLARO", ip: "190.145.68.161" },
{ cod_siesa: "C12", nombre: "NUEVO HORIZONTE", operador: "TIGO UNE", ip: "186.180.64.105" },
{ cod_siesa: "C20", nombre: "PRADOS DEL ESTE", operador: "CLARO", ip: "190.145.235.233" },
{ cod_siesa: "C21", nombre: "SIGLO XXI", operador: "CLARO", ip: "181.48.235.137" },
{ cod_siesa: "C26", nombre: "PAMPLONA", operador: "CLARO", ip: "186.87.70.225" },
{ cod_siesa: "CAQ-", nombre: "CEDI CARIBE", operador: "IFX NETWORKS", ip: "181.79.35.0" },
{ cod_siesa: "CAV", nombre: "CEDI VALLEDUPAR", operador: "CLARO", ip: "181.63.227.96" },
{ cod_siesa: "CES", nombre: "CEDI CENTRO", operador: "CLARO", ip: "190.158.10.86" },
{ cod_siesa: "CES", nombre: "CEDI CENTRO", operador: "IFX NETWORKS", ip: "181.79.35.104" },
{ cod_siesa: "COR", nombre: "CORPORATIVO", operador: "TIGO UNE", ip: "190.71.162.138" },
{ cod_siesa: "OFB", nombre: "OFICINA CATEGORIA Y PRODUCTO", operador: "CLARO", ip: "186.86.241.94" },
{ cod_siesa: "COR", nombre: "CORPORATIVO", operador: "CLARO", ip: "190.85.149.154" },
{ cod_siesa: "COR", nombre: "CORPORATIVO", operador: "CLARO", ip: "190.157.219.210" },
{ cod_siesa: "OFB", nombre: "OFICINA CATEGORIA Y PRODUCTO", operador: "IFX NETWORKS", ip: "190.60.64.250" },
{ cod_siesa: "I02", nombre: "ENVIGADO PARQUE", operador: "CLARO", ip: "190.85.128.149"},
{ cod_siesa: "I03", nombre: "ITAGUI - EL CAMI", operador: "CLARO", ip: "181.48.135.197" },
{ cod_siesa: "I05", nombre: "RIONEGRO ALTOS DE LAURELES", operador: "CLARO", ip: "190.144.60.133" },
{ cod_siesa: "I07", nombre: "SAN ANTONIO DE PEREIRA", operador: "CLARO", ip: "190.144.37.84" },
{ cod_siesa: "I08", nombre: "MEDELL√çN CALAZANS", operador: "CLARO", ip: "181.49.232.116" },
{ cod_siesa: "I10", nombre: "BARBOSA PARQUE", operador: "CLARO", ip: "181.48.33.56" },
{ cod_siesa: "I11", nombre: "MEDELL√çN LAURELES EL NOGAL", operador: "CLARO", ip: "190.85.195.153" },
{ cod_siesa: "I12", nombre: "BELLO GORETTI", operador: "CLARO", ip: "190.85.192.216" },
{ cod_siesa: "I14", nombre: "MEDELL√çN FLORIDA NUEVA", operador: "CLARO", ip: "191.95.39.26" },
{ cod_siesa: "I15", nombre: "GUARNE ESTADIO", operador: "CLARO", ip: "190.145.78.241" },
{ cod_siesa: "I16", nombre: "COPACABANA PLAZA DE MERCADO", operador: "CLARO", ip: "181.49.37.162" },
{ cod_siesa: "I17", nombre: "MEDELLIN ARANJUEZ ISIDRO", operador: "CLARO", ip: "190.145.6.165" },
{ cod_siesa: "I18", nombre: "MED ANTONIO PRADO CASA DE LA CULTURA", operador: "TIGO UNE", ip: "181.206.2.51" },
{ cod_siesa: "I20", nombre: "MEDELLIN JAVIER MICHEL", operador: "CLARO", ip: "190.144.45.129" },
{ cod_siesa: "I21", nombre: "ITAGUI TABLAZO", operador: "CLARO", ip: "181.57.174.12" },
{ cod_siesa: "I27", nombre: "MEDELL√çN BUENOS AIRES", operador: "CLARO", ip: "181.48.208.117" },
{ cod_siesa: "I29", nombre: "MEDELLIN PILARICA CALLE 75", operador: "CLARO", ip: "190.85.242.185" },
{ cod_siesa: "I31", nombre: "MEDELL√çN CASTILLA", operador: "CLARO", ip: "181.48.208.118" },
{ cod_siesa: "I32", nombre: "RIONEGRO PARQUE", operador: "TIGO UNE", ip: "200.116.96.5" },
{ cod_siesa: "I33", nombre: "MEDELLIN SANTA CRUZ", operador: "CLARO", ip: "200.118.239.207" },
{ cod_siesa: "I34", nombre: "ROBLEDO PARQUE", operador: "CLARO", ip: "181.57.210.41" },
{ cod_siesa: "I36", nombre: "SABANETA CALLE LARGA", operador: "CLARO", ip: "181.49.32.173" },
{ cod_siesa: "I38", nombre: "SABANETA PARQUE", operador: "TIGO UNE", ip: "190.249.182.146" },
{ cod_siesa: "I40", nombre: "MEDELLIN GUAYABAL PARQUE DE LAS CHIMENEA", operador: "CLARO", ip: "181.49.159.178" },
{ cod_siesa: "I45", nombre: "MEDELLIN ROBLEDO VILLA FLORA", operador: "CLARO", ip: "181.62.62.134" },
{ cod_siesa: "I47", nombre: "LA ESTRELLA ANCON", operador: "TIGO UNE", ip: "191.88.87.128" },
{ cod_siesa: "I48", nombre: "BARRIO CRISTOBAL", operador: "TIGO UNE", ip: "190.248.200.240" },
{ cod_siesa: "I51", nombre: "CAMPO VALDES 1", operador: "CLARO", ip: "181.58.74.64" },
{ cod_siesa: "I53", nombre: "BELEN LOS ALPES", operador: "CLARO", ip: "186.82.63.12" },
{ cod_siesa: "I54", nombre: "ARKADIA", operador: "TIGO UNE", ip: "190.28.109.94" },
{ cod_siesa: "I55", nombre: "BELLO PARIS", operador: "TIGO UNE", ip: "190.70.209.113" },
{ cod_siesa: "I56", nombre: "ITAGUI SAN FRANCISCO ", operador: "TIGO UNE", ip: "191.88.16.159" },
{ cod_siesa: "I57", nombre: "MEDELLIN MIRAFLORES", operador: "TIGO UNE", ip: "181.137.27.75" },
{ cod_siesa: "I58", nombre: "MEDELLIN SAN JAVIER ESTACION ", operador: "CLARO", ip: "181.51.18.37" },
{ cod_siesa: "I63", nombre: "20 DE JULIO", operador: "TIGO UNE", ip: "177.255.102.44" },
{ cod_siesa: "I64", nombre: "ISIMO SANTA LUC√çA 2", operador: "TIGO UNE", ip: "190.28.109.121" },
{ cod_siesa: "N10", nombre: "BERDEZ", operador: "CLARO", ip: "190.85.206.253" },
{ cod_siesa: "N11", nombre: "BELLA VISTA", operador: "CLARO", ip: "181.48.114.230" },
{ cod_siesa: "N35", nombre: "BELEN DE LOS ANDAQUIES", operador: "FIBERNET", ip: "131.100.50.178" },
{ cod_siesa: "N37", nombre: "QUIRINAL", operador: "CLARO", ip: "181.49.170.85" },
{ cod_siesa: "ORB", nombre: "CEDI ORIENTE BUCARAMANGA", operador: "TIGO UNE", ip: "200.116.217.106" },
{ cod_siesa: "Q01", nombre: "ATLANTICO PUERTO COLOMBIA VILLA CAMPESTRE", operador: "CLARO", ip: "181.53.70.193" },
{ cod_siesa: "Q04", nombre: "CARTAGENA LAS RAMBLAS", operador: "TIGO UNE", ip: "179.13.52.26" },
{ cod_siesa: "Q05", nombre: "ATLANTICO SOLEDAD HIPODROMO", operador: "CLARO", ip: "181.49.234.13" },
{ cod_siesa: "Q06", nombre: "SANTA MARTA SANTA LUCIA", operador: "CLARO", ip: "181.48.27.173" },
{ cod_siesa: "Q07", nombre: "BARRANQUILLA CALLE 84", operador: "CLARO", ip: "190.85.13.10" },
{ cod_siesa: "Q07", nombre: "BARRANQUILLA CALLE 84", operador: "TIGO", ip: "81.69.219.11" },
{ cod_siesa: "Q08", nombre: "CARTAGENA EL CABRERO", operador: "CLARO", ip: "190.85.162.137" },
{ cod_siesa: "Q09", nombre: "BARRANQUILLA MURILLO CARRERA 33", operador: "CLARO", ip: "190.85.63.70" },
{ cod_siesa: "Q10", nombre: "BARRANQUILLA JOSE", operador: "CLARO", ip: "181.49.213.13" },
{ cod_siesa: "Q12", nombre: "SOLEDAD LAS TRINITARIAS", operador: "CLARO", ip: "190.144.65.241" },
{ cod_siesa: "Q13", nombre: "CARTAGENA MATUNA", operador: "GTD", ip: "179.50.84.89" },
{ cod_siesa: "Q14", nombre: "BARRANQUILLA UNIVERSAL CARRERA 2", operador: "CLARO", ip: "181.57.233.9" },
{ cod_siesa: "Q19", nombre: "BARRANQUILLA EL PORVENIR CALLE 82", operador: "CLARO", ip: "190.85.15.233" },
{ cod_siesa: "Q20", nombre: "BARRANQUILLA RECREO CR 43", operador: "CLARO", ip: "190.85.206.244" },
{ cod_siesa: "Q23", nombre: "BARRANQUILLA CONCEPCION", operador: "CLARO", ip: "181.48.37.85" },
{ cod_siesa: "Q25", nombre: "CARTAGENA BRUSELAS", operador: "CLARO", ip: "181.49.31.228" },
{ cod_siesa: "Q27", nombre: "CARTAGENA TERNERA", operador: "CLARO", ip: "190.85.215.129" },
{ cod_siesa: "Q29", nombre: "MAGDALENA CIENAGA", operador: "CLARO", ip: "186.112.181.72" },
{ cod_siesa: "Q30", nombre: "CARTAGENA FERNANDO", operador: "CLARO", ip: "190.85.68.117" },
{ cod_siesa: "Q31", nombre: "CARTAGENA EL CAMPESTRE", operador: "CLARO", ip: "190.85.206.172" },
{ cod_siesa: "Q32", nombre: "BARRANQUILLA LOS NOGALES", operador: "CLARO", ip: "181.49.220.18" },
{ cod_siesa: "Q33", nombre: "BARRANQUILLA CARRERA 27", operador: "CLARO", ip: "190.85.17.150" },
{ cod_siesa: "Q34", nombre: "SANTA MARTA BONDA", operador: "DIALNET", ip: "186.1.170.68" },
{ cod_siesa: "Q35", nombre: "CARTAGENA CRESPO", operador: "CLARO", ip: "190.145.232.249" },
{ cod_siesa: "Q41", nombre: "BARRANQUILLA CRA 43 76 (PATILLAZO)", operador: "CLARO", ip: "190.85.182.217" },
{ cod_siesa: "Q42", nombre: "BARRANQUILLA CENTRO", operador: "CLARO", ip: "181.49.26.121" },
{ cod_siesa: "Q45", nombre: "CARTAGENA BARLOVENTO", operador: "CLARO", ip: "190.145.24.201" },
{ cod_siesa: "Q46", nombre: "BARRANQUILLA BORACAY", operador: "CLARO", ip: "181.48.112.1" },
{ cod_siesa: "Q47", nombre: "BARRANQUILLA MONTES", operador: "CLARO", ip: "190.85.157.41" },
{ cod_siesa: "Q48", nombre: "SANTA MARTA LA ESPERANZA", operador: "CLARO", ip: "181.49.232.49" },
{ cod_siesa: "Q49", nombre: "SANTA MARTA LAS ACACIAS", operador: "CLARO", ip: "181.48.57.97" },
{ cod_siesa: "Q50", nombre: "SANTA MARTA 1 DE MAYO", operador: "CLARO", ip: "190.145.38.113" },
{ cod_siesa: "Q51", nombre: "BARRANQUILLA LA PRADERA", operador: "CLARO", ip: "181.57.225.217" },
{ cod_siesa: "Q52", nombre: "BARRANQUILLA EL SILENCIO", operador: "CLARO", ip: "190145166142" },
{ cod_siesa: "Q53", nombre: "SOLEDAD NORMAND√çA", operador: "CLARO", ip: "190.145.216.113" },
{ cod_siesa: "Q54", nombre: "SANTA MARTA ONCE DE NOVIEMBRE", operador: "CLARO", ip: "181.49.39.245" },
{ cod_siesa: "Q55", nombre: "CARTAGENA CASTILLO SAN FELIPE", operador: "CLARO", ip: "190.85.45.153" },
{ cod_siesa: "Q58", nombre: "BARRANQUILLA LA UNI√ìN", operador: "CLARO", ip: "181.49.134.174" },
{ cod_siesa: "Q59", nombre: "BARRANQUILLA 51 B", operador: "CLARO", ip: "181.49.131.109" },
{ cod_siesa: "Q62", nombre: "BARRANQUILLA CALLE 72", operador: "CLARO", ip: "190.144.165.34" },
{ cod_siesa: "Q64", nombre: "ATLANTICO SOLEDAD 2000 CARRERA 14", operador: "CLARO", ip: "181.48.96.158" },
{ cod_siesa: "Q65", nombre: "SANTA MARTA LOS NARANJOS", operador: "CLARO", ip: "181.59.44.190" },
{ cod_siesa: "Q66", nombre: "BARRANQUILLA SAN REMO", operador: "CLARO", ip: "190.145.79.52" },
{ cod_siesa: "Q67", nombre: "BARRANQUILLA SAN NICOLAS CARRERA 4", operador: "CLARO", ip: "181.57.222.181" },
{ cod_siesa: "Q68", nombre: "GALAPA CLLE 10", operador: "TIGO UNE", ip: "181.137.152.215" },
{ cod_siesa: "Q69", nombre: "BARRANQUILLA OLAYA CALLE 71", operador: "CLARO", ip: "190.144.52.49" },
{ cod_siesa: "Q70", nombre: "BARRANQUILLA LA VICTORIA", operador: "CLARO", ip: "186.84.153.105" },
{ cod_siesa: "Q71", nombre: "BARRANQUILLA LAS DELICIAS", operador: "CLARO", ip: "181.49.225.73" },
{ cod_siesa: "Q72", nombre: "BARRANQUILLA CARIBE VERDE", operador: "CLARO", ip: "181.63.103.152" },
{ cod_siesa: "Q73", nombre: "CARTAGENA ESPA√ëA", operador: "CLARO", ip: "181.48.110.193" },
{ cod_siesa: "Q74", nombre: "CARTAGENA EL RECREO", operador: "CLARO", ip: "190.145.239.121" },
{ cod_siesa: "Q75", nombre: "BARRANQUILLA PARAISO", operador: "TIGO UNE", ip: "190.70.120.146" },
{ cod_siesa: "Q77", nombre: "MANANTIALES", operador: "TIGO UNE", ip: "201.233.249.137" },
{ cod_siesa: "Q78", nombre: "LAS MERCEDES CRA 38", operador: "TIGO UNE", ip: "190.70.121.205" },
{ cod_siesa: "Q79", nombre: "LA PAZ", operador: "TIGO UNE", ip: "200.116.59.186" },
{ cod_siesa: "Q85", nombre: "ISIMO CEVILLAR", operador: "TIGO UNE", ip: "181.69.193.67" },
{ cod_siesa: "Q93", nombre: "ISIMO BUENOS AIRES", operador: "CLARO", ip: "181.59.214.12/30" },
{ cod_siesa: "Q96", nombre: "ISIMO CIUDAD DEL PARQUE", operador: "GTD", ip: "179.50.87.14" },
{ cod_siesa: "Q98", nombre: "ISIMO LAS TORRES", operador: "CLARO", ip: "192.168.2.4" },
{ cod_siesa: "S01", nombre: "GIRARDOT PANCHES", operador: "CLARO", ip: "181.61.105.226" },
{ cod_siesa: "S02", nombre: "RICAURTE CUNDINAMARCA", operador: "CLARO", ip: "190.159.72.29" },
{ cod_siesa: "S03", nombre: "SUBA VILLA GLORIA", operador: "CLARO", ip: "190.85.242.181" },
{ cod_siesa: "S04", nombre: "SUBA AURES 1", operador: "CLARO", ip: "190.144.26.21" },
{ cod_siesa: "S06", nombre: "CEDRO GOLF", operador: "CLARO", ip: "181.49.37.161" },
{ cod_siesa: "S07", nombre: "CEDROS", operador: "CLARO", ip: "190.85.244.21" },
{ cod_siesa: "S09", nombre: "SANTA TERESA", operador: "CLARO", ip: "181.49.15.21" },
{ cod_siesa: "S11", nombre: "UBATE JJ", operador: "CLARO", ip: "190.145.205.169" },
{ cod_siesa: "S15", nombre: "FONTIBON PLAZA", operador: "CLARO", ip: "190.144.161.185" },
{ cod_siesa: "S16", nombre: "NORMANDIA OCCIDENTAL 2", operador: "CLARO", ip: "181.48.38.253" },
{ cod_siesa: "S17", nombre: "FACA SANTANDER", operador: "CLARO", ip: "190.156.149.118" },
{ cod_siesa: "S18", nombre: "FUNZA ZUAME", operador: "CLARO", ip: "190.144.247.109" },
{ cod_siesa: "S19", nombre: "POLO CLUB", operador: "CLARO", ip: "190.145.197.113" },
{ cod_siesa: "S20", nombre: "QUESADA", operador: "CLARO", ip: "190.85.118.77" },
{ cod_siesa: "S24", nombre: "JUAN REY", operador: "CLARO", ip: "190.85.57.165" },
{ cod_siesa: "S25", nombre: "LA VICTORIA", operador: "CLARO", ip: "181.49.230.209" },
{ cod_siesa: "S26", nombre: "OLARTE VILLA DEL RIO", operador: "CLARO", ip: "181.48.15.57" },
{ cod_siesa: "S27", nombre: "PARQUE LUIS CARLOS GALAN", operador: "CLARO", ip: "181.49.231.101" },
{ cod_siesa: "S29", nombre: "SAN CRISTOBAL SUR", operador: "CLARO", ip: "181.49.231.161" },
{ cod_siesa: "S30", nombre: "SANTA RITA", operador: "CLARO", ip: "181.48.70.125" },
{ cod_siesa: "S32", nombre: "SOACHA DESPENSA", operador: "TIGO UNE", ip: "191.92.173.211" },
{ cod_siesa: "S34", nombre: "FUSAGASUGA", operador: "CLARO", ip: "186.147.222.8" },
{ cod_siesa: "S53", nombre: "QUINTA PAREDES EMBAJADA", operador: "CLARO", ip: "190.144.67.5" },
{ cod_siesa: "S55", nombre: "QUIRIGUA", operador: "CLARO", ip: "181.48.25.221" },
{ cod_siesa: "S56", nombre: "22 SUR", operador: "CLARO", ip: "190.144.18.30" },
{ cod_siesa: "S57", nombre: "BOSA LAURELES", operador: "CLARO", ip: "181.63.103.68" },
{ cod_siesa: "S59", nombre: "RESTREPO", operador: "CLARO", ip: "190.146.165.45" },
{ cod_siesa: "S60", nombre: "LUCERO BAJO", operador: "CLARO", ip: "181.49.100.105" },
{ cod_siesa: "S63", nombre: "SUBA HOSPITAL", operador: "CLARO", ip: "181.48.220.165" },
{ cod_siesa: "S65", nombre: "TABIO", operador: "CLARO", ip: "190.159.138.32" },
{ cod_siesa: "S69", nombre: "MAZUREN", operador: "CLARO", ip: "190.85.148.253" },
{ cod_siesa: "S70", nombre: "SILVANIA", operador: "CLARO", ip: "190.147.213.157" },
{ cod_siesa: "S71", nombre: "UNIR TIERRA NEGRA", operador: "CLARO", ip: "200.89.238.38" },
{ cod_siesa: "S72", nombre: "PATIO BONITO 87", operador: "CLARO", ip: "181.48.195.132" },
{ cod_siesa: "S73", nombre: "NUEVO MUZU", operador: "CLARO", ip: "190.145.169.228" },
{ cod_siesa: "S74", nombre: "EL CARMEN", operador: "CLARO", ip: "181.48.80.134" },
{ cod_siesa: "S78", nombre: "CIUDAD JARDIN", operador: "CLARO", ip: "190.85.203.130" },
{ cod_siesa: "S79", nombre: "USME PUEBLO", operador: "NETBEAM", ip: "181.52.175.116" },
{ cod_siesa: "S80", nombre: "ZIPAQUIRA PAZ", operador: "CLARO", ip: "186.145.139.196" },
{ cod_siesa: "S82", nombre: "SOACHA ESQUINA", operador: "CLARO", ip: "190.145.193.244" },
{ cod_siesa: "S83", nombre: "MONTE BLANCO", operador: "CLARO", ip: "190.85.166.101" },
{ cod_siesa: "S86", nombre: "CHUCUA", operador: "CLARO", ip: "190.85.102.165" },
{ cod_siesa: "S87", nombre: "RESERVAS DEL PORVENIR", operador: "CLARO", ip: "181.49.115.33" },
{ cod_siesa: "S90", nombre: "SAN JOAQUIN B", operador: "CLARO", ip: "190.144.29.22" },
{ cod_siesa: "S93", nombre: "SOPO CENTRO", operador: "CLARO", ip: "201.222.172.61" },
{ cod_siesa: "S94", nombre: "MINUTO DE DIOS", operador: "CLARO", ip: "181.57.132.52" },
{ cod_siesa: "S96", nombre: "MODELIA", operador: "CLARO", ip: "190.144.108.92" },
{ cod_siesa: "S97", nombre: "SAN VICENTE DE FERRER", operador: "CLARO", ip: "190.158.141.163" },
{ cod_siesa: "S98", nombre: "VILLA GLADYS", operador: "TIGO UNE", ip: "179.15.167.158" },
{ cod_siesa: "SA0", nombre: "ISIMO BOGOT√Å  SAN FRANCISCO", operador: "ETB", ip: "186.29.44.11" },
{ cod_siesa: "SA1", nombre: "ISIMO SAN BLAS", operador: "ETB", ip: "186.154.32.133" },
{ cod_siesa: "SA2", nombre: "ISIMO SUBA FONTANAR", operador: "TIGO UNE", ip: "200.116.59.186" },
{ cod_siesa: "SA3", nombre: "SAN PATRICIO", operador: "ETB", ip: "186.155.2.200" },
{ cod_siesa: "SA4", nombre: "LOMAS", operador: "GTD", ip: "179.50.2.165" },
{ cod_siesa: "SA5", nombre: "ISIMO TREBOL", operador: "ETB", ip: "190.25.74.117" },
{ cod_siesa: "SA6", nombre: "ISIMO VARIANTE CELTA", operador: "GTD", ip: "179.50.2.174/30" },
{ cod_siesa: "SC5", nombre: "ISIMO TIHUAQUE", operador: "CLARO", ip: " 186.83.153.21" },
{ cod_siesa: "SUN", nombre: "CEDI NEIVA", operador: "CLARO", ip: "190.158.7.12" },
{ cod_siesa: "SUT", nombre: "CEDI SUR", operador: "GTD", ip: "186.118.184.66" },
{ cod_siesa: "T02", nombre: "IBAGUE LA POLA", operador: "CLARO", ip: "190.85.120.113" },
{ cod_siesa: "T05", nombre: "MELGAR", operador: "CLARO", ip: "181.51.69.104" },
{ cod_siesa: "T06", nombre: "HONDA OBRERO", operador: "RESICOM", ip: "204.199.122.18" },
{ cod_siesa: "T07", nombre: "SALADO 1", operador: "CLARO", ip: "190.143.69.201" },
{ cod_siesa: "T11", nombre: "LIBANO", operador: "RESICOM", ip: "191.95.54.168" },
{ cod_siesa: "T13", nombre: "FLANDES", operador: "CLARO", ip: "190.144.131.0" },
{ cod_siesa: "T15", nombre: "IBAGUE LIMONAR", operador: "CLARO", ip: "190.85.212.161" },
{ cod_siesa: "T25", nombre: "GAITAN IBAGUE", operador: "CLARO", ip: "181.48.69.194" },
{ cod_siesa: "T27", nombre: "EL CABRERO LA DORADA", operador: "CLARO", ip: "190.145.25.202" },
{ cod_siesa: "T29", nombre: "ALVARADO", operador: "RESICOM", ip: "191.97.10.192" },
{ cod_siesa: "T31", nombre: "TUNAL", operador: "MOVISTAR", ip: "186.112.181.98" },
{ cod_siesa: "T33", nombre: "LAS FERIAS", operador: "CLARO", ip: "190.85.206.165" },
{ cod_siesa: "T36", nombre: "EL ESPINAL 4 Y GONGORA", operador: "CLARO", ip: "181.51.56.247" },
{ cod_siesa: "T37", nombre: "INTERLAKEN", operador: "CLARO", ip: "190.85.61.17" },
{ cod_siesa: "T39", nombre: "GUAMO 2", operador: "CLARO", ip: "200.118.101.215" },
{ cod_siesa: "T42", nombre: "PALOCABILDO TOLIMA", operador: "RESICOM", ip: "143.137.99.186" },
{ cod_siesa: "T43", nombre: "FALAN", operador: "RESICOM", ip: "177.93.39.90" },
{ cod_siesa: "T44", nombre: "LA DORADA VILLA ESPERANZA", operador: "CLARO", ip: "186.147.174.250" },
{ cod_siesa: "T47", nombre: "IBAGUE VILLA MARLEN", operador: "CLARO", ip: "190.85.212.162" },
{ cod_siesa: "T48", nombre: "IBAGUE BELEN", operador: "CLARO", ip: "181.49.171.69" },
{ cod_siesa: "T49", nombre: "IBAGUE LA FRANCIA", operador: "CLARO", ip: "190.85.42.29" },
];

// Endpoint para consultar estado de IPs
app.get("/status", async (req, res) => {
  const resultados = await Promise.all(
    tiendas.map(async (tienda) => {
      try {
        const resultado = await ping.promise.probe(tienda.ip, { timeout: 2 });
        return {
          cod_siesa: tienda.cod_siesa,
          nombre: tienda.nombre,
          ip: tienda.ip,
          operador: tienda.operador,
          estado: resultado.alive ? `OK (${resultado.time} ms)` : "FALLA",
        };
      } catch {
        return { cod_siesa:tienda.cod_siesa, nombre:tienda.nombre, operador:tienda.operador, ip: tienda.ip, estado: "FALLA" };
      }
    })
  );
  res.json(resultados);
});

app.listen(port, () => {
  console.log(`‚úÖ Servidor corriendo en http://localhost:${port}`);
});
